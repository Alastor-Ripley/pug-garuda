# Maintainer: Thomas "Ventto" Venri√®s <thomas.venries@gmail.com>
pkgname="bacpac"
pkgver=1
pkgrel=1
pkgdesc="Saves the list of packages installed via pacman. (pacmanity's fork)"
url=""
arch=('x86_64' 'i686')
license=('GPL')
depends=('pacman>=5.0' 'gist>=4.5.0')
makedepends=('git')
url="https://github.com/Ventto/bacpac.git"
source=('https://github.com/Ventto/bacpac/archive/master.zip')
sha256sums=('SKIP')

package() {

  # Install and save file
  mkdir -p "${pkgdir}/etc/"
  touch "${pkgdir}/etc/bacpac"

  # Install script
  mkdir -p "${pkgdir}/usr/lib/bacpac"
  cp "${srcdir}/${pkgname}-master/src/bacpac.sh" "${pkgdir}/usr/lib/bacpac/bacpac.sh"
  chmod +x "${pkgdir}/usr/lib/bacpac/bacpac.sh"

  # Install Hook
  mkdir -p "${pkgdir}/usr/share/libalpm/hooks"
  cp "${srcdir}/${pkgname}-master/src/bacpac.hook" "${pkgdir}/usr/share/libalpm/hooks/bacpac.hook"

  source "${pkgdir}/usr/lib/bacpac/bacpac.sh"; bacpac_install;
}
